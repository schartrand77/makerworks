:root{
  /* VisionOS-ish material tokens (dark-first; light auto-derives) */
  --vo-surface: rgba(255,255,255,.06);
  --vo-surface-2: rgba(255,255,255,.08);
  --vo-border: rgba(255,255,255,.16);
  --vo-hairline: rgba(255,255,255,.55);
  --vo-muted: rgba(229,231,235,.72);
  --vo-text: #e6e8eb;

  /* Lift/blur */
  --vo-blur: 26px;
  --vo-shadow: 0 30px 120px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.06);
  --vo-softshadow: 0 14px 50px rgba(0,0,0,.35);

  /* Accents (tie to your emerald ring) */
  --vo-accent: var(--mw-ring);
  --vo-accent-weak: color-mix(in oklab, var(--mw-ring) 24%, transparent);
}

/* ===== Layout chrome ===== */
.vo-root{
  min-height: calc(100dvh - 120px);
  display: grid; place-items: start center;
  padding: 32px 20px 56px;
  color: var(--vo-text);
}

.vo-window{
  position: relative;
  width: min(100%, 980px);
  border-radius: 32px;
  overflow: clip; /* keep all halos in-bounds */
  background:
    radial-gradient(140% 120% at 50% -10%, rgba(255,255,255,.18), rgba(255,255,255,.04) 60%) ,
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04)) ,
    var(--vo-surface);
  backdrop-filter: blur(var(--vo-blur)) saturate(170%);
  -webkit-backdrop-filter: blur(var(--vo-blur)) saturate(170%);
  border: 1px solid var(--vo-border);
  box-shadow: var(--vo-shadow);
}

/* inner hairline + corner softening */
.vo-window::before{
  content:"";
  position:absolute; inset:0;
  border-radius:inherit;
  pointer-events:none;
  box-shadow:
    inset 0 0 0 .6px var(--vo-hairline),
    inset 0 1px 0 rgba(255,255,255,.35);
  mix-blend-mode: screen;
}

.vo-header{
  display:flex; align-items:center; justify-content:space-between;
  padding: 18px 22px;
  border-bottom: 1px solid var(--vo-border);
  background:
    linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06)),
    transparent;
}
.vo-title{
  display:flex; gap:10px; align-items:center;
  margin:0; font-weight:800; letter-spacing:.2px;
  text-shadow: 0 1px 2px rgba(0,0,0,.35);
}
.vo-title-emoji{ filter: drop-shadow(0 1px 6px rgba(0,0,0,.25)); }

.vo-body{ padding: 18px; }

.vo-pane{
  position: relative;
  border-radius: 24px;
  padding: 18px;
  background:
    radial-gradient(120% 120% at 50% -10%, rgba(255,255,255,.10), rgba(255,255,255,.04) 60%),
    var(--vo-surface-2);
  border: 1px solid var(--vo-border);
  box-shadow: var(--vo-softshadow);
  overflow: clip; /* contain inner glows / absolute children */
}

/* ===== Grid / sections ===== */
.vo-row{ display:grid; grid-template-columns: 1fr; gap: 20px; }
@media (min-width: 980px){ .vo-row{ grid-template-columns: 1fr 1fr; } }
.vo-col{ display:block; }

.vo-h3{ margin: 0 0 8px; font-weight: 800; letter-spacing:.2px; }
.vo-muted{ color: var(--vo-muted); }
.vo-divider{
  height:1px; background: var(--vo-border); margin: 20px 0; border-radius: 999px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.22);
}

/* ===== Drop targets ===== */
.vo-drop{
  border: 1px dashed color-mix(in oklab, var(--vo-border) 65%, transparent);
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)),
    rgba(0,0,0,.18);
  border-radius: 18px; padding: 18px; margin: 10px 0 14px;
  transition: border-color .2s ease, background .2s ease, transform .08s ease;
}
.vo-drop:hover{ transform: translateY(-1px); }
.vo-drop.is-drag{
  border-color: color-mix(in oklab, var(--vo-accent) 55%, transparent);
  background:
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04)),
    color-mix(in oklab, var(--vo-accent) 10%, rgba(0,0,0,.18));
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.45),
    0 0 0 1px color-mix(in oklab, var(--vo-accent) 22%, transparent);
}
.vo-drop-inner{ display:flex; gap:12px; align-items:center; justify-content:center; text-align:center; }
.vo-drop-icon{ font-size: 28px; filter: drop-shadow(0 1px 6px rgba(0,0,0,.25)); }
.vo-drop-title{ font-weight:800; }
.vo-drop-sub{ color: var(--vo-muted); font-size:12px; }

/* ===== File pill & progress ===== */
.vo-file{
  display:grid; grid-template-columns: 1fr auto; gap:8px 12px; align-items:center;
  border:1px solid var(--vo-border); border-radius:14px; padding:10px 12px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)),
    rgba(0,0,0,.18);
  margin-top: 6px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.vo-file-name{ font-weight:700; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.vo-file-size{ color:var(--vo-muted); font-size:12px; }

.vo-progress{ grid-column:1/-1; height:8px; background: rgba(0,0,0,.35); border-radius:999px; overflow:hidden; }
.vo-progress-bar{
  height:100%;
  background:
    linear-gradient(90deg, color-mix(in oklab, var(--vo-accent) 80%, white), var(--vo-accent));
  box-shadow: 0 1px 6px color-mix(in oklab, var(--vo-accent) 45%, transparent);
}

/* ===== Form fields ===== */
.vo-grid{
  display:grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr); /* prevent overflow from long strings */
  gap:12px;
}
@media (max-width: 720px){ .vo-grid{ grid-template-columns: minmax(0, 1fr); } }
.vo-grid > *{ min-width: 0; } /* allow children to shrink within the grid */

.vo-field{ display:grid; gap:6px; min-width: 0; }
.vo-field > span{ font-size:12px; color: var(--vo-muted); }

.vo-field input,
.vo-field textarea,
.vo-field select{
  border-radius:14px; padding:12px 12px;
  border:1px solid var(--vo-border);
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.025)),
    rgba(0,0,0,.22);
  color:#fff; outline:none;
  transition: box-shadow .18s ease, border-color .18s ease, background .18s ease, transform .08s ease;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
  min-width: 0; /* inputs behave inside grid */
  overflow: hidden;
  text-overflow: ellipsis;
}
.vo-field input:focus,
.vo-field textarea:focus,
.vo-field select:focus{
  border-color: color-mix(in oklab, var(--vo-accent) 48%, transparent);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.45),
    0 0 0 1px color-mix(in oklab, var(--vo-accent) 22%, transparent);
  transform: translateY(-1px);
}
::placeholder{ color: color-mix(in oklab, var(--vo-muted) 80%, black); }

/* ===== Search results ===== */
.vo-search{
  margin-top:6px; border:1px solid var(--vo-border); border-radius:14px;
  max-height:180px; overflow:auto;
  background: rgba(0,0,0,.22);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.vo-search-item{
  display:block; width:100%; text-align:left; padding:10px 12px;
  background:transparent; border:none; color:#fff; cursor:pointer;
  transition: background .14s ease;
}
.vo-search-item:hover{ background: rgba(255,255,255,.08); }
.vo-id{ color: var(--vo-muted); }

/* ===== Photos section (hidden until model exists) ===== */
.vo-photos{
  border:1px solid var(--vo-border); border-radius:18px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)),
    rgba(0,0,0,.18);
  padding: 6px 8px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.vo-photos-summary{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:8px 6px; cursor:pointer; list-style:none;
}
.vo-photos > summary::-webkit-details-marker{ display:none; }

/* Slots */
.vo-slots{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; margin-top: 8px; }
.vo-slot{
  position: relative; aspect-ratio: 4/3; border-radius:16px; overflow:hidden;
  border:1px dashed color-mix(in oklab, var(--vo-border) 65%, transparent);
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)),
    rgba(0,0,0,.18);
  display:flex; align-items:center; justify-content:center; user-select:none;
  transition: border-color .18s ease, background .18s ease, transform .08s ease, box-shadow .18s ease;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
}
.vo-slot:hover{ transform: translateY(-1px); border-color: color-mix(in oklab, var(--vo-accent) 55%, transparent); }
.vo-slot.has-image{
  border-style: solid; border-color: rgba(255,255,255,.18);
  background: rgba(0,0,0,.26);
  box-shadow: 0 10px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.05);
}
.vo-slot img{ width:100%; height:100%; object-fit:cover; display:block; }

.vo-slot-inner{ text-align:center; color: var(--vo-muted); }
.vo-slot-plus{ font-size: 26px; line-height:1; margin-bottom: 2px; opacity:.9; }
.vo-slot-hint{ font-size: 12px; }

.vo-slot-x{ position:absolute; top:8px; right:8px; padding-inline: .55rem; }

/* ===== Actions ===== */
.vo-actions{ margin-top:16px; display:flex; justify-content:flex-end; gap:12px; }
.vo-actions.between{ justify-content:space-between; }

/* ===== Errors ===== */
.vo-error{
  margin-top:10px;
  padding:10px 12px;
  border:1px solid rgba(255,99,99,.35);
  background: rgba(255,99,99,.08);
  color:#ffd7d7;
  border-radius:12px;
}

/* ---- Button sizing/placement tweaks ---------------------------------- */

/* Primary action bar on the left column */
.vo-actions.vo-primary{
  margin-top: 18px;
  display: flex;
  justify-content: flex-end;
}
.vo-actions.vo-primary .mw-btn{ min-width: 220px; }

/* Photos footer: make primary big, keep clear subtle */
.vo-actions.between .mw-btn-lg{ min-width: 220px; }

/* Trailing action on the Effective Model ID field */
.vo-field--with-action{ position: relative; min-width: 0; }
.vo-field--with-action input[readonly]{
  padding-right: 10.5rem; /* room for the pill */
  text-overflow: ellipsis;
}
.vo-field-action{
  position:absolute;
  right:8px;
  top: 36px;       /* aligns with input content line */
  z-index:1;
  white-space:nowrap;
}
.vo-field-action.mw-btn{ height: 2rem; padding-inline: .7rem; }

/* Mobile: primary buttons span full width; field action drops under input */
@media (max-width: 720px){
  .vo-actions.vo-primary{ justify-content: stretch; }
  .vo-actions.vo-primary .mw-btn,
  details .vo-actions .mw-btn-lg{ width: 100%; }

  .vo-field--with-action{ padding-bottom: 46px; }
  .vo-field-action{ top:auto; bottom:6px; right:8px; }
}

/* ===== Misc ===== */
.vo-check{ display:inline-flex; align-items:center; gap:10px; margin: 8px 0 12px; }
.vo-code{ opacity:.85; }

/* Light mode softening */
@media (prefers-color-scheme: light){
  :root{
    --vo-text: #1a1c1e;
    --vo-muted: rgba(0,0,0,.55);
    --vo-surface: rgba(255,255,255,.72);
    --vo-surface-2: rgba(255,255,255,.78);
    --vo-border: rgba(0,0,0,.12);
    --vo-hairline: rgba(255,255,255,.9);
    --vo-shadow: 0 30px 120px rgba(0,0,0,.10), inset 0 1px 0 rgba(255,255,255,.65);
  }
  .vo-file, .vo-drop, .vo-photos, .vo-field input, .vo-field textarea, .vo-field select {
    background: linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.78)), rgba(255,255,255,.85);
  }
}
