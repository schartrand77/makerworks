/* === MakerWorks LED system (unified) =======================================
   One button style to rule them all:
   - Pill shape (enforced with !important to beat stray utilities)
   - Transparent base (no solid fill)
   - Ring-only look (no outer glow by default)
   - Text color unified to a lighter emerald (balanced for light/dark)
   - Sizes via helpers (.mw-btn-xs/sm/md/lg/xl)
   - Variants by ring color (green default; red/amber/blue optional)
   - Matching pill tabs (.mw-tab) for Admin & navbar
   ========================================================================== */

/* --- Theme tokens -------------------------------------------------------- */
:root{
  --mw-ring:        #16a34a; /* emerald-600 default (green) */
  --mw-ring-blue:   #3b82f6; /* blue-500   */
  --mw-ring-amber:  #f59e0b; /* amber-500  */
  --mw-ring-red:    #ef4444; /* red-500    */

  --mw-inner-hi:    rgba(255,255,255,.65); /* subtle inner highlight */
  --mw-focus-white: rgba(255,255,255,.60);

  /* unified button/tab text color (light UI) */
  --mw-btn-text: color-mix(in oklab, var(--mw-ring) 38%, black);
}
/* dark theme override */
.dark{
  --mw-btn-text: color-mix(in oklab, var(--mw-ring) 70%, white);
}

/* Utility: hard pill radius anywhere you need it */
.mw-pill{ border-radius:9999px !important; }

/* --- Base pill button (use on every button) ------------------------------ */
.mw-btn,
button.mw-btn,
a.mw-btn,
.mw-enter,          /* legacy alias: “enter/confirm/primary” */
.mw-danger {        /* legacy alias: “danger”, gets red ring below */
  /* shape + layout */
  display:inline-flex; align-items:center; justify-content:center;
  height:2.5rem; padding:0 1rem; font-size:.875rem; font-weight:500;
  border-radius:9999px !important;

  /* core look */
  background:transparent !important;     /* never solid */
  /* fallback first, then var-based unified emerald text */
  color:#34d399 !important;              /* fallback (emerald-400) */
  color:var(--mw-btn-text) !important;   /* unified lighter green text */
  border:1px solid var(--mw-ring) !important;

  /* ring-only vibe: a crisp inner highlight, no outer glow */
  box-shadow: inset 0 1px 0 var(--mw-inner-hi);
  transition:
    border-color 180ms ease,
    transform 80ms ease,
    box-shadow 180ms ease;
  -webkit-tap-highlight-color: transparent;
}

/* Hover/Focus — with safe fallbacks if color-mix missing */
.mw-btn:hover,
button.mw-btn:hover,
a.mw-btn:hover,
.mw-enter:hover,
.mw-danger:hover{
  transform:translateY(-1px);
  box-shadow: inset 0 1px 0 var(--mw-inner-hi);
  border-color: var(--mw-ring) !important; /* fallback */
}
@supports (color: color-mix(in oklab, black 50%, white)){
  .mw-btn:hover,
  button.mw-btn:hover,
  a.mw-btn:hover,
  .mw-enter:hover,
  .mw-danger:hover{
    border-color: color-mix(in oklab, var(--mw-ring) 85%, black) !important;
  }
}

.mw-btn:focus-visible,
button.mw-btn:focus-visible,
a.mw-btn:focus-visible,
.mw-enter:focus-visible,
.mw-danger:focus-visible{
  outline:none !important;
  box-shadow:
    inset 0 1px 0 var(--mw-inner-hi),
    0 0 0 2px var(--mw-focus-white),
    0 0 0 4px var(--mw-ring);
}

.mw-btn:disabled,
button.mw-btn:disabled,
a.mw-btn:disabled,
.mw-enter:disabled,
.mw-danger:disabled{
  opacity:.55; cursor:not-allowed; transform:none;
}

/* --- Sizes (choose one; shape stays identical) --------------------------- */
.mw-btn-xs{ height:2rem;    padding:0 .75rem;  font-size:.8125rem; border-radius:9999px !important; }
.mw-btn-sm{ height:2.25rem; padding:0 .875rem; font-size:.875rem;  border-radius:9999px !important; }
.mw-btn-md{ height:2.5rem;  padding:0 1rem;    font-size:.875rem;  border-radius:9999px !important; }  /* default */
.mw-btn-lg{ height:2.75rem; padding:0 1.125rem; font-size:.9375rem; border-radius:9999px !important; }
.mw-btn-xl{ height:3rem;    padding:0 1.25rem;  font-size:1rem;     border-radius:9999px !important; }

/* --- Variants by ring color (same lighting & shape) ---------------------- */
/* default green already set via --mw-ring */
.mw-btn--blue{  --mw-ring: var(--mw-ring-blue); }
.mw-btn--amber{ --mw-ring: var(--mw-ring-amber); }
.mw-btn--red,
.mw-danger{     --mw-ring: var(--mw-ring-red);   }

/* Quiet/ghost: same pill, dimmer ring */
.mw-btn--quiet{ border-color: color-mix(in oklab, var(--mw-ring) 45%, transparent) !important; }
@supports not (color: color-mix(in oklab, black 50%, white)){
  .mw-btn--quiet{ border-color: rgba(22,163,74,.45) !important; }
}
.mw-btn--quiet:hover{
  border-color: color-mix(in oklab, var(--mw-ring) 70%, black) !important;
}
@supports not (color: color-mix(in oklab, black 50%, white)){
  .mw-btn--quiet:hover{ border-color: #14833d !important; }
}

/* --- Navbar / header pills ------------------------------------------------ */
/* Make anything that looks like a nav item a pill by default */
header nav a,
header nav button,
.mw-nav a,
.mw-nav button{
  border-radius:9999px !important;
}

/* --- Tabs / chips (Admin, etc.) ----------------------------------------- */
.mw-tab, .mw-chip{
  display:inline-flex; align-items:center; justify-content:center;
  height:2.25rem; padding:0 .9rem; font-size:.875rem; font-weight:500;
  border-radius:9999px !important;
  background:transparent !important;
  color:#34d399 !important;              /* fallback */
  color:var(--mw-btn-text) !important;
  border:1px solid var(--mw-ring) !important;
  box-shadow: inset 0 1px 0 var(--mw-inner-hi);
  transition:border-color 180ms ease, transform 80ms ease, box-shadow 180ms ease;
}
.mw-tab:hover, .mw-chip:hover{ transform: translateY(-1px); }
.mw-tab.is-active, .mw-chip.is-active{
  border-color: var(--mw-ring) !important;
  box-shadow:
    inset 0 1px 0 var(--mw-inner-hi),
    0 0 0 1px color-mix(in oklab, var(--mw-ring) 18%, transparent);
}
@supports not (color: color-mix(in oklab, black 50%, white)){
  .mw-tab.is-active, .mw-chip.is-active{
    box-shadow:
      inset 0 1px 0 var(--mw-inner-hi),
      0 0 0 1px rgba(22,163,74,.18);
  }
}

/* --- Card halo container (subtle, ring-only aesthetic) ------------------- */
.mw-led{ position:relative; transition: box-shadow 180ms ease, border-color 180ms ease; }

/* green (default) button hovering -> faint under-glow on the card border */
.mw-led:has(.mw-btn:hover),
.mw-led:has(.mw-enter:hover){
  border-color: color-mix(in oklab, var(--mw-ring) 55%, transparent) !important;
  box-shadow:
    inset 0 1px 0 var(--mw-inner-hi),
    0 0 0 1px color-mix(in oklab, var(--mw-ring) 18%, transparent);
}
.dark .mw-led:has(.mw-btn:hover),
.dark .mw-led:has(.mw-enter:hover){
  border-color: color-mix(in oklab, var(--mw-ring) 70%, transparent) !important;
  box-shadow:
    inset 0 1px 0 var(--mw-inner-hi),
    0 0 0 1px color-mix(in oklab, var(--mw-ring) 26%, transparent);
}

/* red variant hovering -> same treatment, red ring (no extra bloom) */
.mw-led:has(.mw-btn.mw-btn--red:hover),
.mw-led:has(.mw-danger:hover){
  border-color: color-mix(in oklab, var(--mw-ring-red) 60%, transparent) !important;
  box-shadow:
    inset 0 1px 0 var(--mw-inner-hi),
    0 0 0 1px color-mix(in oklab, var(--mw-ring-red) 22%, transparent);
}
.dark .mw-led:has(.mw-btn.mw-btn--red:hover),
.dark .mw-led:has(.mw-danger:hover){
  border-color: color-mix(in oklab, var(--mw-ring-red) 72%, transparent) !important;
  box-shadow:
    inset 0 1px 0 var(--mw-inner-hi),
    0 0 0 1px color-mix(in oklab, var(--mw-ring-red) 28%, transparent);
}

/* --- Thumbnail frame (unchanged) ---------------------------------------- */
.mw-thumb{ border:0 !important; box-shadow:none !important; overflow:visible; }
.mw-thumb-frame{
  background:transparent;
  border-radius:12px;
  overflow:hidden;
  -webkit-mask-image:-webkit-radial-gradient(white, black);
  mask-image: radial-gradient(#fff 99.9%, transparent 100%);
}
.mw-thumb-img{
  display:block; max-width:92%; max-height:92%;
  object-fit:contain; object-position:center; margin:0 auto;
}

/* --- Profile page glue (still forces pills within profile scope) --------- */
.mw-profile-scope button{
  background:transparent !important;
  color:#34d399 !important;
  color:var(--mw-btn-text) !important;
  border:1px solid var(--mw-ring) !important;
  border-radius:9999px !important;
  padding:.38rem .9rem;
  font-size:.9rem;
  font-weight:500;
  box-shadow: inset 0 1px 0 var(--mw-inner-hi);
  transition: border-color 180ms ease, transform 80ms ease, box-shadow 180ms ease;
}
.mw-profile-scope button:hover{
  transform:translateY(-.5px);
  border-color: var(--mw-ring) !important;
}
@supports (color: color-mix(in oklab, black 50%, white)){
  .mw-profile-scope button:hover{
    border-color: color-mix(in oklab, var(--mw-ring) 85%, black) !important;
  }
}
.mw-profile-scope button:focus-visible{
  outline:none !important;
  box-shadow:
    inset 0 1px 0 var(--mw-inner-hi),
    0 0 0 2px var(--mw-focus-white),
    0 0 0 4px var(--mw-ring);
}
.mw-profile-scope:has(button:hover){
  border-color: color-mix(in oklab, var(--mw-ring) 55%, transparent) !important;
  box-shadow:
    inset 0 1px 0 var(--mw-inner-hi),
    0 0 0 1px color-mix(in oklab, var(--mw-ring) 18%, transparent);
}
.dark .mw-profile-scope:has(button:hover){
  border-color: color-mix(in oklab, var(--mw-ring) 70%, transparent) !important;
  box-shadow:
    inset 0 1px 0 var(--mw-inner-hi),
    0 0 0 1px color-mix(in oklab, var(--mw-ring) 26%, transparent);
}

/* === Landing-only fluorescent flicker halo (kept) ======================== */
/* Add class="mw-card--flicker" to the Landing card (e.g., GlassCard) */
.mw-card--flicker { position: relative; isolation: isolate; }

.mw-card--flicker::after{
  content:"";
  position:absolute;
  inset:-12%;
  border-radius:inherit;
  pointer-events:none;
  z-index:-1;

  /* two-layer glow: green core + faint white halo */
  background:
    radial-gradient(60% 55% at 50% 50%,
      rgba(22,163,74,0.18) 0%,
      rgba(22,163,74,0.08) 40%,
      rgba(22,163,74,0.00) 72%),
    radial-gradient(120% 90% at 50% 50%,
      rgba(255,255,255,0.14) 0%,
      rgba(255,255,255,0.00) 60%);
  filter: blur(24px);
  opacity: .85;

  /* 1) warmup = irregular flicker once
     2) hum = gentle ongoing shimmer */
  animation:
    mw-bulb-warmup 1.6s steps(24, end) 1 both,
    mw-bulb-hum 2.2s ease-in-out infinite 1.6s;
  will-change: opacity, filter;
}

.dark .mw-card--flicker::after{
  opacity:.9;
  filter: blur(26px);
}

/* Slight boost when any LED button inside is hovered */
.mw-card--flicker:has(.mw-btn:hover),
.mw-card--flicker:has(.mw-enter:hover)::after{
  opacity:.98;
  filter: blur(30px);
}

/* Irregular startup flicker: a few pops, then settles */
@keyframes mw-bulb-warmup{
  0%   { opacity:0.00; }
  5%   { opacity:0.95; }
  7%   { opacity:0.20; }
  12%  { opacity:0.88; }
  16%  { opacity:0.25; }
  22%  { opacity:0.97; }
  27%  { opacity:0.32; }
  33%  { opacity:1.00; }
  40%  { opacity:0.38; }
  48%  { opacity:0.94; }
  58%  { opacity:0.52; }
  68%  { opacity:0.98; }
  78%  { opacity:0.70; }
  88%  { opacity:0.92; }
  100% { opacity:0.85; }
}

/* Subtle ongoing “hum” so it feels alive but not annoying */
@keyframes mw-bulb-hum{
  0%,100% { opacity:0.82; filter: blur(24px); }
  45%     { opacity:0.78; filter: blur(23px); }
  55%     { opacity:0.86; filter: blur(24.5px); }
}

/* Respect reduced motion: no flicker, just a steady glow */
@media (prefers-reduced-motion: reduce){
  .mw-card--flicker::after{
    animation:none !important;
    opacity:.86;
    filter: blur(24px);
  }
}
